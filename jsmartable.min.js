$.fn.jsmartable=function(a){var t=$.extend({breakpoint:{xs:480,sm:576,md:992,lg:1200,xlg:1400},iconPlus:'<i class="fa fa-plus text-info"></i>',iconMinus:'<i class="fa fa-minus text-danger"></i>',allExpended:!1},a),e=this;function l(){var a=$(window).width();e.each(function(){var e=$(this),l=e.data("all-expanded");void 0===l&&(l=t.allExpended);var s=e.find("thead tr:first th[data-breakpoint]");if(s.length<=0)return!1;e.find("> tbody > tr").not(".jsmartable-row").each(function(e){var n=$(this),r=(n.find("td"),n.data("formated")),d=n.data("expanded"),o='<table class="jsmartable-subtable table table-bordered">\n                                <tbody>',b=0;for(i=0;i<s.length;i++){var c=s.eq(i),m=c.prop("cellIndex"),f=c.data("breakpoint"),u=n.find(":nth-child("+m+")"),h=u.data("title");if(void 0!==h&&""!=h||(h=c.html()),u<=0)return console.log("TD Column "+m+" not found"),!1;"undefined"!=t.breakpoint[f]&&t.breakpoint[f]>=a?(o+=`<tr class="jsmartable-subrow">\n                            <td class="jsmartable-subcol" style="width:30%; background:#eee;">${h}</td>\n                            <td class="jsmartable-subcol">${u.html()}</td>\n                        </tr>`,c.hide(),u.hide(),b++):(c.show(),u.show())}if(o+="\n                    </tbody>\n                </table>",void 0===r&&b>0){n.data("formated",!0),n.after(`<tr id="jsmartable-row-${e}" class="jsmartable-row">\n                        <td colspan='100%' class="jsmartable-col">\n                            ${o}\n                        </td>\n                    </tr>`);var p=t.iconMinus;void 0!==d&&0!=d||void 0!==l&&0!=l||($("#jsmartable-row-"+e).hide(),p=t.iconPlus),$("#jsmartable-row-"+e).prev().find("td:visible").first().prepend(`<a href='javascript:void(0);' class="mr-2 jsmartable-collapse" data-opened="true">${p}</a>`)}else r&&b>0?$("#jsmartable-row-"+e+" > td").html(o):b<=0&&(n.removeData("formated"),$("#jsmartable-row-"+e).remove(),$(".jsmartable-collapse").remove())})})}$(window).resize(function(){l()}),l(),$("body").on("click",".jsmartable-collapse",function(){var a=$(this),e=a.closest("td").closest("tr").next();e.is(":visible")?(e.fadeOut("fast"),a.html(t.iconPlus)):(e.fadeIn(),a.html(t.iconMinus))})},$(".jsmartable").jsmartable();