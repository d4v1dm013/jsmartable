$.fn.jsmartable=function(options){var settings=$.extend({breakpoint:{xs:480,sm:576,md:992,lg:1200,xlg:1400},iconPlus:'<i class="fa fa-plus text-info"></i>',iconMinus:'<i class="fa fa-minus text-danger"></i>',allExpended:!1},options),tableSelector=this;function responsiveTable(){var screenSize=$(window).width();tableSelector.each(function(){var table=$(this),allExpanded=table.data("all-expanded");void 0===allExpanded&&(allExpanded=settings.allExpended);var th=table.find("thead tr:first th[data-breakpoint]");if(th.length<=0)return!1;table.find("> tbody > tr").not(".jsmartable-row").each(function(index){var row=$(this),formated=(row.find("td"),row.data("formated")),expanded=row.data("expanded"),html='<table class="jsmartable-subtable table table-bordered">\n                                <tbody>',totalElement=0;for(i=0;i<th.length;i++){var currentTh=th.eq(i),columnPosition=currentTh.prop("cellIndex")+1,breakpoint=currentTh.data("breakpoint"),currentTd=row.find("td:nth-child("+columnPosition+")"),title=currentTd.data("title");if(void 0!==title&&""!=title||(title=currentTh.html()),currentTd<=0)return console.log("TD Column "+columnPosition+" not found"),!1;"undefined"!=settings.breakpoint[breakpoint]&&settings.breakpoint[breakpoint]>=screenSize?(html+=`<tr class="jsmartable-subrow">\n                            <td class="jsmartable-subcol" style="width:30%; background:#eee;">${title}</td>\n                            <td class="jsmartable-subcol">${currentTd.html()}</td>\n                        </tr>`,currentTh.hide(),currentTd.hide(),totalElement++):(currentTh.show(),currentTd.show())}if(html+="\n                    </tbody>\n                </table>",void 0===formated&&totalElement>0){row.data("formated",!0),row.after(`<tr id="jsmartable-row-${index}" class="jsmartable-row">\n                        <td colspan='100%' class="jsmartable-col">\n                            ${html}\n                        </td>\n                    </tr>`);var buttonIcon=settings.iconMinus;void 0!==expanded&&0!=expanded||void 0!==allExpanded&&0!=allExpanded||($("#jsmartable-row-"+index).hide(),buttonIcon=settings.iconPlus),$("#jsmartable-row-"+index).prev().find("td:visible").first().prepend(`<a href='javascript:void(0);' class="mr-2 jsmartable-collapse" data-opened="true">${buttonIcon}</a>`)}else formated&&totalElement>0?$("#jsmartable-row-"+index+" > td").html(html):totalElement<=0&&(row.removeData("formated"),$("#jsmartable-row-"+index).remove(),$(".jsmartable-collapse").remove())})})}$(window).resize(function(){responsiveTable()}),responsiveTable(),$("body").on("click",".jsmartable-collapse",function(){var $this=$(this),jsmartableRow=$this.closest("td").closest("tr").next();jsmartableRow.is(":visible")?(jsmartableRow.fadeOut("fast"),$this.html(settings.iconPlus)):(jsmartableRow.fadeIn(),$this.html(settings.iconMinus))})},$(".jsmartable").jsmartable();