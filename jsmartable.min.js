$.fn.jsmartable=function(a){var t=$.extend({breakpoint:{xs:480,sm:576,md:992,lg:1200,xlg:1400},iconPlus:'<i class="fas fa-plus text-info"></i>',iconMinus:'<i class="fas fa-minus text-danger"></i>',allExpended:!1},a),e=this;function s(){var a=$(window).width();e.each(function(){var e=$(this),s=e.data("all-expanded");void 0===s&&(s=t.allExpended);var l=e.find("thead tr:first th[data-breakpoint]");if(l.length<=0)return!1;e.find("> tbody > tr").not(".jsmartable-row").each(function(e){var r=$(this),n=r.find("td"),o=r.data("formated"),d=r.data("expanded"),b='<table class="jsmartable-subtable table table-bordered">\n                                <tbody>',c=0;for(i=0;i<l.length;i++){var m=l.eq(i),f=m.prop("cellIndex"),u=m.data("breakpoint"),h=n.eq(f);if(h<=0)return console.log("TD Column "+f+" not found"),!1;"undefined"!=t.breakpoint[u]&&t.breakpoint[u]>=a?(b+=`<tr class="jsmartable-subrow">\n                            <td class="jsmartable-subcol" style="width:30%; background:#eee;">${m.html()}</td>\n                            <td class="jsmartable-subcol">${h.html()}</td>\n                        </tr>`,m.hide(),h.hide(),c++):(m.show(),h.show())}if(b+="\n                    </tbody>\n                </table>",void 0===o&&c>0){r.data("formated",!0),r.after(`<tr id="jsmartable-row-${e}" class="jsmartable-row">\n                        <td colspan='100%' class="jsmartable-col">\n                            ${b}\n                        </td>\n                    </tr>`);var p=t.iconMinus;void 0!==d&&0!=d||void 0!==s&&0!=s||($("#jsmartable-row-"+e).hide(),p=t.iconPlus),$("#jsmartable-row-"+e).prev().find("td:visible").first().prepend(`<a href='javascript:void(0);' class="mr-2 jsmartable-collapse" data-opened="true">${p}</a>`)}else o&&c>0?$("#jsmartable-row-"+e+" > td").html(b):c<=0&&(r.removeData("formated"),$("#jsmartable-row-"+e).remove(),$(".jsmartable-collapse").remove())})})}$(window).resize(function(){s()}),s(),$("body").on("click",".jsmartable-collapse",function(){var a=$(this),e=a.closest("td").closest("tr").next();e.is(":visible")?(e.fadeOut("fast"),a.html(t.iconPlus)):(e.fadeIn(),a.html(t.iconMinus))})},$(".jsmartable").jsmartable();